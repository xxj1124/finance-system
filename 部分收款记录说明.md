# 部分收款记录操作说明

## 系统状态
服务器已成功启动：http://127.0.0.1:5000/

## 一、销售订单方式记录部分收款

### 1. 功能概述
通过销售订单流程管理销售业务，支持记录部分收款情况。

### 2. 操作步骤

#### 步骤1：添加客户
1. 点击左侧菜单：**销售管理** → **客户管理**
2. 点击**添加客户**按钮
3. 填写客户信息（名称、联系人、电话等）
4. 点击**保存**按钮

#### 步骤2：创建销售订单
1. 点击左侧菜单：**销售管理** → **销售订单**
2. 点击**添加销售订单**按钮
3. 选择客户
4. 设置税率和支付方式
5. 添加销售项目（商品名称、数量、单价）
6. 系统自动计算总金额和税额
7. 点击**保存**按钮

#### 步骤3：审批销售订单
1. 在销售订单列表中找到刚创建的订单
2. 点击**审批**按钮
3. 订单状态变为"approved"

#### 步骤4：记录部分收款（模拟方式）
由于系统当前版本的销售订单模型没有直接的部分收款字段，您可以通过以下方式模拟：

**方式A：使用订单完成功能记录全额收款**
1. 点击**完成**按钮
2. 订单状态变为"completed"
3. 系统会自动生成相应的收款凭证

**方式B：通过凭证管理手动记录部分收款**
1. 进入**财务管理** → **新增凭证**
2. 创建收款凭证（见下方直接凭证方式）
3. 在凭证摘要中注明："收到客户XX销售订单XX部分款项"

### 3. 界面说明
- **销售订单列表**：显示所有销售订单，包含订单号、客户、金额、状态等信息
- **销售订单详情**：显示订单的详细信息，包括客户信息、销售项目、总金额、税额等
- **订单操作按钮**：提供查看、审批、完成、取消等操作

## 二、直接凭证方式记录部分收款

### 1. 功能概述
通过财务管理模块的凭证功能，直接记录部分收款业务，适用于没有销售订单的情况或补充记录。

### 2. 操作步骤

#### 步骤1：进入凭证管理
1. 点击左侧菜单：**财务管理** → **新增凭证**

#### 步骤2：创建收款凭证
1. **凭证日期**：选择收款日期
2. **摘要**：输入收款说明（如："收到客户XX部分货款"）
3. **凭证分录**：
   - 第一行（借方）：选择银行存款科目（如"1002-银行存款"），填写收款金额
   - 第二行（贷方）：选择应收账款科目（如"1122-应收账款"），填写相同金额
4. 确保借贷平衡（系统会自动验证）
5. 点击**保存**按钮

#### 步骤3：审核凭证
1. 点击左侧菜单：**财务管理** → **凭证管理**
2. 找到刚创建的凭证
3. 点击**审核**按钮
4. 凭证状态变为"approved"

#### 步骤4：过账凭证
1. 在凭证列表中找到已审核的凭证
2. 点击**过账**按钮
3. 系统会自动更新相关科目的余额

### 3. 界面说明
- **凭证表单**：包含凭证日期、摘要、凭证分录等字段
- **凭证分录表格**：可添加多行分录，每行包含科目、借方金额、贷方金额、摘要等
- **借贷平衡提示**：实时显示借贷金额是否平衡

## 三、两种方式的适用场景比较

| 比较项目 | 销售订单方式 | 直接凭证方式 |
|---------|------------|------------|
| **适用场景** | 完整的销售业务流程管理 | 快速记录收款，无销售订单的情况 |
| **优点** | 1. 完整记录销售业务流程<br>2. 便于跟踪订单状态<br>3. 自动关联客户信息 | 1. 操作简单快捷<br>2. 灵活记录各种收款情况<br>3. 无需复杂的业务流程 |
| **缺点** | 1. 操作步骤较多<br>2. 部分收款需要手动处理 | 1. 无法跟踪完整销售流程<br>2. 缺乏销售业务关联信息 |
| **最佳实践** | 用于有完整销售流程的业务 | 用于补充记录或无销售订单的收款业务 |

## 四、常见问题解决

### 1. 销售管理菜单无反应
- 问题原因：下拉菜单JavaScript未加载
- 解决方案：系统已修复，刷新页面即可使用

### 2. 凭证保存失败
- 问题原因：借贷不平衡
- 解决方案：检查凭证分录，确保借方总额等于贷方总额

### 3. 服务器连接失败
- 问题原因：端口被占用
- 解决方案：系统已自动处理端口冲突，重新启动服务器即可

## 五、联系方式
如有其他问题，请联系系统管理员。